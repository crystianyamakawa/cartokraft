!function(t){t(document).on("turbolinks:load",function(){function e(e){var i=e.css("font-family"),a=e.css("font-size"),s=e.css("line-height");a&&n.css("font-size",a),i&&n.css("font-family",i),s&&n.css("line-height",s),"off"===e.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(e.val()+"\n");var l=n.html().replace(/\n/g,"<br>");n.html(l),e.is(":visible")?n.css("width",e.width()):n.css("width",t(window).width()/2),e.data("original-height")<=n.height()?e.css("height",n.height()):e.val().length<e.data("previous-length")&&e.css("height",e.data("original-height")),e.data("previous-length",e.val().length)}Materialize.updateTextFields=function(){t("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(e,i){var n=t(this);t(i).val().length>0||i.autofocus||n.attr("placeholder")!==undefined?n.siblings("label").addClass("active"):t(i)[0].validity?n.siblings("label").toggleClass("active",!0===t(i)[0].validity.badInput):n.siblings("label").removeClass("active")})};var i="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";t(document).on("change",i,function(){0===t(this).val().length&&t(this).attr("placeholder")===undefined||t(this).siblings("label").addClass("active"),validate_field(t(this))}),t(document).on("turbolinks:load",function(){Materialize.updateTextFields()}),t(document).on("reset",function(e){var n=t(e.target);n.is("form")&&(n.find(i).removeClass("valid").removeClass("invalid"),n.find(i).each(function(){""===t(this).attr("value")&&t(this).siblings("label").removeClass("active")}),n.find("select.initialized").each(function(){var t=n.find("option[selected]").text();n.siblings("input.select-dropdown").val(t)}))}),t(document).on("focus",i,function(){t(this).siblings("label, .prefix").addClass("active")}),t(document).on("blur",i,function(){var e=t(this),i=".prefix";0===e.val().length&&!0!==e[0].validity.badInput&&e.attr("placeholder")===undefined&&(i+=", label"),e.siblings(i).removeClass("active"),validate_field(e)}),window.validate_field=function(t){var e=t.attr("data-length")!==undefined,i=parseInt(t.attr("data-length")),n=t.val().length;0===t.val().length&&!1===t[0].validity.badInput?t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid")):t.hasClass("validate")&&(t.is(":valid")&&e&&n<=i||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid")))},t(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(e){if(9===e.which)return t(this).addClass("tabbed"),void t(this).one("blur",function(){t(this).removeClass("tabbed")})});var n=t(".hiddendiv").first();n.length||(n=t('<div class="hiddendiv common"></div>'),t("body").append(n));var a=".materialize-textarea";t(a).each(function(){var e=t(this);e.data("original-height",e.height()),e.data("previous-length",e.val().length)}),t("body").on("keyup keydown autoresize",a,function(){e(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var e=t(this).closest(".file-field"),i=e.find("input.file-path"),n=t(this)[0].files,a=[],s=0;s<n.length;s++)a.push(n[s].name);i.val(a.join(", ")),i.trigger("change")});var s="input[type=range]",l=!1;t(s).each(function(){var e=t('<span class="thumb"><span class="value"></span></span>');t(this).after(e)});var o=function(t){var e=parseInt(t.parent().css("padding-left")),i=-7+e+"px";t.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:i},{duration:300,easing:"easeOutExpo"})},r=function(t){var e=t.width()-15,i=parseFloat(t.attr("max")),n=parseFloat(t.attr("min"));return(parseFloat(t.val())-n)/(i-n)*e},d=".range-field";t(document).on("change",s,function(){var e=t(this).siblings(".thumb");e.find(".value").html(t(this).val()),e.hasClass("active")||o(e);var i=r(t(this));e.addClass("active").css("left",i)}),t(document).on("mousedown touchstart",s,function(e){var i=t(this).siblings(".thumb");if(i.length<=0&&(i=t('<span class="thumb"><span class="value"></span></span>'),t(this).after(i)),i.find(".value").html(t(this).val()),l=!0,t(this).addClass("active"),i.hasClass("active")||o(i),"input"!==e.type){var n=r(t(this));i.addClass("active").css("left",n)}}),t(document).on("mouseup touchend",d,function(){l=!1,t(this).removeClass("active")}),t(document).on("input mousemove touchmove",d,function(){var e=t(this).children(".thumb"),i=t(this).find(s);if(l){e.hasClass("active")||o(e);var n=r(i);e.addClass("active").css("left",n),e.find(".value").html(e.siblings(s).val())}}),t(document).on("mouseout touchleave",d,function(){if(!l){var e=t(this).children(".thumb"),i=parseInt(t(this).css("padding-left")),n=7+i+"px";e.hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:n},{duration:100}),e.removeClass("active")}}),t.fn.autocomplete=function(e){var i={data:{},limit:Infinity,onAutocomplete:null,minLength:1};return e=t.extend(i,e),this.each(function(){var i,n=t(this),a=e.data,s=0,l=-1,o=n.closest(".input-field");if(!t.isEmptyObject(a)){var r,d=t('<ul class="autocomplete-content dropdown-content"></ul>');o.length?(r=o.children(".autocomplete-content.dropdown-content").first(),r.length||o.append(d)):(r=n.next(".autocomplete-content.dropdown-content"),r.length||n.after(d)),r.length&&(d=r);var c=function(t,e){var i=e.find("img"),n=e.text().toLowerCase().indexOf(""+t.toLowerCase()),a=n+t.length-1,s=e.text().slice(0,n),l=e.text().slice(n,a+1),o=e.text().slice(a+1);e.html("<span>"+s+"<span class='highlight'>"+l+"</span>"+o+"</span>"),i.length&&e.prepend(i)},p=function(){l=-1,d.find(".active").removeClass("active")},u=function(){d.empty(),p(),i=undefined};n.off("blur.autocomplete").on("blur.autocomplete",function(){u()}),n.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(l){s=0;var o=n.val().toLowerCase();if(13!==l.which&&38!==l.which&&40!==l.which){if(i!==o&&(u(),o.length>=e.minLength))for(var r in a)if(a.hasOwnProperty(r)&&-1!==r.toLowerCase().indexOf(o)&&r.toLowerCase()!==o){if(s>=e.limit)break;var p=t("<li></li>");a[r]?p.append('<img src="'+a[r]+'" class="right circle"><span>'+r+"</span>"):p.append("<span>"+r+"</span>"),d.append(p),c(o,p),s++}i=o}}),n.off("keydown.autocomplete").on("keydown.autocomplete",function(t){var e,i=t.which,n=d.children("li").length,a=d.children(".active").first();if(13===i&&l>=0)return e=d.children("li").eq(l),void(e.length&&(e.trigger("mousedown.autocomplete"),t.preventDefault()));38!==i&&40!==i||(t.preventDefault(),38===i&&l>0&&l--,40===i&&l<n-1&&l++,a.removeClass("active"),l>=0&&d.children("li").eq(l).addClass("active"))}),d.on("mousedown.autocomplete touchstart.autocomplete","li",function(){var i=t(this).text().trim();n.val(i),n.trigger("change"),u(),"function"==typeof e.onAutocomplete&&e.onAutocomplete.call(this,i)})}})}}),t.fn.material_select=function(e){function i(t,e,i){var a=t.indexOf(e),s=-1===a;return s?t.push(e):t.splice(a,1),i.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(e).toggleClass("active"),i.find("option").eq(e).prop("selected",s),n(t,i),s}function n(t,e){for(var i="",n=0,a=t.length;n<a;n++){var s=e.find("option").eq(t[n]).text();i+=0===n?s:", "+s}""===i&&(i=e.find("option:disabled").eq(0).text()),e.siblings("input.select-dropdown").val(i)}t(this).each(function(){var n=t(this);if(!n.hasClass("browser-default")){var a=!!n.attr("multiple"),s=n.data("select-id");if(s&&(n.parent().find("span.caret").remove(),n.parent().find("input").remove(),n.unwrap(),t("ul#select-options-"+s).remove()),"destroy"===e)return void n.data("select-id",null).removeClass("initialized");var l=Materialize.guid();n.data("select-id",l);var o=t('<div class="select-wrapper"></div>');o.addClass(n.attr("class"));var r=t('<ul id="select-options-'+l+'" class="dropdown-content select-dropdown '+(a?"multiple-select-dropdown":"")+'"></ul>'),d=n.children("option, optgroup"),c=[],p=!1,u=n.find("option:selected").html()||n.find("option:first").html()||"",h=function(e,i,n){var s=i.is(":disabled")?"disabled ":"",l="optgroup-option"===n?"optgroup-option ":"",o=a?'<input type="checkbox"'+s+"/><label></label>":"",d=i.data("icon"),c=i.attr("class");if(d){var p="";return c&&(p=' class="'+c+'"'),r.append(t('<li class="'+s+l+'"><img alt="" src="'+d+'"'+p+"><span>"+o+i.html()+"</span></li>")),!0}r.append(t('<li class="'+s+l+'"><span>'+o+i.html()+"</span></li>"))};d.length&&d.each(function(){if(t(this).is("option"))a?h(n,t(this),"multiple"):h(n,t(this));else if(t(this).is("optgroup")){var e=t(this).children("option");r.append(t('<li class="optgroup"><span>'+t(this).attr("label")+"</span></li>")),e.each(function(){h(n,t(this),"optgroup-option")})}}),r.find("li:not(.optgroup)").each(function(s){t(this).click(function(l){if(!t(this).hasClass("disabled")&&!t(this).hasClass("optgroup")){var o=!0;a?(t('input[type="checkbox"]',this).prop("checked",function(t,e){return!e}),o=i(c,s,n),g.trigger("focus")):(r.find("li").removeClass("active"),t(this).toggleClass("active"),g.val(t(this).text())),m(r,t(this)),n.find("option").eq(s).prop("selected",o),n.trigger("change"),void 0!==e&&e()}l.stopPropagation()})}),n.wrap(o);var f=t('<span class="caret">&#9660;</span>');n.is(":disabled")&&f.addClass("disabled");var v=u.replace(/"/g,"&quot;"),g=t('<input type="text" class="select-dropdown" readonly="true" '+(n.is(":disabled")?"disabled":"")+' data-activates="select-options-'+l+'" value="'+v+'"/>');n.before(g),g.before(f),g.after(r),n.is(":disabled")||g.dropdown({hover:!1}),n.attr("tabindex")&&t(g[0]).attr("tabindex",n.attr("tabindex")),n.addClass("initialized"),g.on({focus:function(){if(t("ul.select-dropdown").not(r[0]).is(":visible")&&t("input.select-dropdown").trigger("close"),!r.is(":visible")){t(this).trigger("open",["focus"]);var e=t(this).val();a&&e.indexOf(",")>=0&&(e=e.split(",")[0]);var i=r.find("li").filter(function(){return t(this).text().toLowerCase()===e.toLowerCase()})[0];m(r,i,!0)}},click:function(t){t.stopPropagation()}}),g.on("blur",function(){a||t(this).trigger("close"),r.find("li.selected").removeClass("selected")}),r.hover(function(){p=!0},function(){p=!1}),t(window).on({click:function(){a&&(p||g.trigger("close"))}}),a&&n.find("option:selected:not(:disabled)").each(function(){var e=t(this).index();i(c,e,n),r.find("li").eq(e).find(":checkbox").prop("checked",!0)});var m=function(e,i,n){if(i){e.find("li.selected").removeClass("selected");var s=t(i);s.addClass("selected"),a&&!n||r.scrollTo(s)}},b=[],w=function(e){if(9==e.which)return void g.trigger("close");if(40==e.which&&!r.is(":visible"))return void g.trigger("open");if(13!=e.which||r.is(":visible")){e.preventDefault();var i=String.fromCharCode(e.which).toLowerCase(),n=[9,13,27,38,40];if(i&&-1===n.indexOf(e.which)){b.push(i);var s=b.join(""),l=r.find("li").filter(function(){return 0===t(this).text().toLowerCase().indexOf(s)})[0];l&&m(r,l)}if(13==e.which){var o=r.find("li.selected:not(.disabled)")[0];o&&(t(o).trigger("click"),a||g.trigger("close"))}40==e.which&&(l=r.find("li.selected").length?r.find("li.selected").next("li:not(.disabled)")[0]:r.find("li:not(.disabled)")[0],m(r,l)),27==e.which&&g.trigger("close"),38==e.which&&(l=r.find("li.selected").prev("li:not(.disabled)")[0])&&m(r,l),setTimeout(function(){b=[]},1e3)}};g.on("keydown",w)}})}}(jQuery);