!function(t){t.fn.scrollTo=function(n){return t(this).scrollTop(t(this).scrollTop()-t(this).offset().top+t(n).offset().top),this},t.fn.dropdown=function(n){var i={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===n?(this.each(function(){t(this).trigger("open")}),!1):"close"===n?(this.each(function(){t(this).trigger("close")}),!1):void this.each(function(){function o(){r.data("induration")!==undefined&&(d.inDuration=r.data("induration")),r.data("outduration")!==undefined&&(d.outDuration=r.data("outduration")),r.data("constrainwidth")!==undefined&&(d.constrainWidth=r.data("constrainwidth")),r.data("hover")!==undefined&&(d.hover=r.data("hover")),r.data("gutter")!==undefined&&(d.gutter=r.data("gutter")),r.data("beloworigin")!==undefined&&(d.belowOrigin=r.data("beloworigin")),r.data("alignment")!==undefined&&(d.alignment=r.data("alignment")),r.data("stoppropagation")!==undefined&&(d.stopPropagation=r.data("stoppropagation"))}function e(n){"focus"===n&&(s=!0),o(),u.addClass("active"),r.addClass("active"),!0===d.constrainWidth?u.css("width",r.outerWidth()):u.css("white-space","nowrap");var i=window.innerHeight,e=r.innerHeight(),c=r.offset().left,l=r.offset().top-t(window).scrollTop(),f=d.alignment,h=0,p=0,g=0;!0===d.belowOrigin&&(g=e);var v=0,w=0,m=r.parent();if(m.is("body")||(m[0].scrollHeight>m[0].clientHeight&&(v=m[0].scrollTop),m[0].scrollWidth>m[0].clientWidth&&(w=m[0].scrollLeft)),c+u.innerWidth()>t(window).width()?f="right":c-u.innerWidth()+r.innerWidth()<0&&(f="left"),l+u.innerHeight()>i)if(l+e-u.innerHeight()<0){var b=i-l-g;u.css("max-height",b)}else g||(g+=e),g-=u.innerHeight();if("left"===f)h=d.gutter,p=r.position().left+h;else if("right"===f){var W=r.position().left+r.outerWidth()-u.outerWidth();h=-d.gutter,p=W+h}u.css({position:"absolute",top:r.position().top+g+v,left:p+w}),u.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:d.inDuration,easing:"easeOutCubic",complete:function(){t(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:d.inDuration,easing:"easeOutSine"}),setTimeout(function(){t(document).bind("click."+u.attr("id"),function(){a(),t(document).unbind("click."+u.attr("id"))})},0)}function a(){s=!1,u.fadeOut(d.outDuration),u.removeClass("active"),r.removeClass("active"),t(document).unbind("click."+u.attr("id")),setTimeout(function(){u.css("max-height","")},d.outDuration)}var r=t(this),d=t.extend({},i,n),s=!1,u=t("#"+r.attr("data-activates"));if(o(),r.after(u),d.hover){var c=!1;r.unbind("click."+r.attr("id")),r.on("mouseenter",function(){!1===c&&(e(),c=!0)}),r.on("mouseleave",function(n){var i=n.toElement||n.relatedTarget;t(i).closest(".dropdown-content").is(u)||(u.stop(!0,!0),a(),c=!1)}),u.on("mouseleave",function(n){var i=n.toElement||n.relatedTarget;t(i).closest(".dropdown-button").is(r)||(u.stop(!0,!0),a(),c=!1)})}else r.unbind("click."+r.attr("id")),r.bind("click."+r.attr("id"),function(n){s||(r[0]!=n.currentTarget||r.hasClass("active")||0!==t(n.target).closest(".dropdown-content").length?r.hasClass("active")&&(a(),t(document).unbind("click."+u.attr("id"))):(n.preventDefault(),d.stopPropagation&&n.stopPropagation(),e("click")))});r.on("open",function(t,n){e(n)}),r.on("close",a)})},t(document).on("turbolinks:load",function(){t(".dropdown-button").dropdown()})}(jQuery);