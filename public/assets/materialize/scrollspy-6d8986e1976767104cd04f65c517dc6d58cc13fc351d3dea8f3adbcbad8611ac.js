!function(t){function e(e,r,o,i){var l=t();return t.each(n,function(t,n){if(n.height()>0){var a=n.offset().top,s=n.offset().left,c=s+n.width(),f=a+n.height();!(s>r||c<i||a>o||f<e)&&l.push(n)}}),l}function r(r){++s;var o=i.scrollTop(),n=i.scrollLeft(),a=n+i.width(),f=o+i.height(),h=e(o+c.top+r||200,a+c.right,f+c.bottom,n+c.left);t.each(h,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",s)}),t.each(l,function(t,e){var r=e.data("scrollSpy:ticks");"number"==typeof r&&r!==s&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),l=h}function o(){i.trigger("scrollSpy:winSize")}var i=t(window),n=[],l=[],a=!1,s=0,c={top:0,right:0,bottom:0,left:0};t.scrollSpy=function(e,o){var l={throttle:100,scrollOffset:200};o=t.extend(l,o);var s=[];e=t(e),e.each(function(e,r){n.push(t(r)),t(r).data("scrollSpy:id",e),t('a[href="#'+t(r).attr("id")+'"]').click(function(e){e.preventDefault();var r=t(Materialize.escapeHash(this.hash)).offset().top+1;t("html, body").animate({scrollTop:r-o.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),c.top=o.offsetTop||0,c.right=o.offsetRight||0,c.bottom=o.offsetBottom||0,c.left=o.offsetLeft||0;var f=Materialize.throttle(function(){r(o.scrollOffset)},o.throttle||100),h=function(){t(document).on("turbolinks:load",f)};return a||(i.on("scroll",h),i.on("resize",h),a=!0),setTimeout(h,0),e.on("scrollSpy:enter",function(){s=t.grep(s,function(t){return 0!=t.height()});var e=t(this);s[0]?(t('a[href="#'+s[0].attr("id")+'"]').removeClass("active"),e.data("scrollSpy:id")<s[0].data("scrollSpy:id")?s.unshift(t(this)):s.push(t(this))):s.push(t(this)),t('a[href="#'+s[0].attr("id")+'"]').addClass("active")}),e.on("scrollSpy:exit",function(){if(s=t.grep(s,function(t){return 0!=t.height()}),s[0]){t('a[href="#'+s[0].attr("id")+'"]').removeClass("active");var e=t(this);s=t.grep(s,function(t){return t.attr("id")!=e.attr("id")}),s[0]&&t('a[href="#'+s[0].attr("id")+'"]').addClass("active")}}),e},t.winSizeSpy=function(e){return t.winSizeSpy=function(){return i},e=e||{throttle:100},i.on("resize",Materialize.throttle(o,e.throttle||100))},t.fn.scrollSpy=function(e){return t.scrollSpy(t(this),e)}}(jQuery);